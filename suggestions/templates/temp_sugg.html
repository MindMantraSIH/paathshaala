{% extends "forum/base-temp.html" %}
{% load static %}
{% block style %}
<link href="https://vjs.zencdn.net/7.20.2/video-js.css" rel="stylesheet" />
<script src="https://vjs.zencdn.net/7.20.2/video.min.js"></script>
<style>
  .btn-primary,
  .btn-secondary {
    background-color: #bff5fa;
    color: black;
    border: 0.5px solid #bff5fa !important;
    box-shadow: 3px 3px 5px #888888;
    margin: 0.5rem;
    width:5rem;
    border-radius: 2vh;
    height: auto;
  }
  .btn-group-toggle{
    margin-bottom: 2rem !important;
    margin: auto;
    display: block;
  }
  .btn:not(:disabled):not(.disabled) {
    background-color: #bff5fa;
  }

  .btn-group-toggle :hover {
    background-color: #fee648 !important;
    color: #000;
  }
  .btn-primary:hover{
    background-color: #fee648 !important;
    color: #000;
  }
  .active {
    background-color: #fee648 !important;
    color: #000 !important;
  }

  .btn-group>.btn-group:not(:last-child)>.btn,
  .btn-group>.btn:not(:last-child):not(.dropdown-toggle) {
    border-radius: 2vh;
  }

  .btn-group>.btn-group:not(:first-child)>.btn,
  .btn-group>.btn:not(:first-child) {
    border-radius: 2vh;
  }
</style>
{% endblock style %}
{% block body %}
<div class="container" style="margin-top:10vh;">



  <!--    <video width="400" controls>-->
  <!--  <source src="{% static 'suggestions/video1.mp4' %}" id="content_video" type="video/mp4" autoplay="true" >-->
  <!--  <source src="mov_bbb.ogg" type="video/ogg">-->
  <video id="video_kgvid_0" controls preload="metadata" width="750" height="470" class="fitvidsignore video-js kg-
 video-js-skin" style="display:block; margin:auto;margin-bottom: 3rem !important;">
    <source src="{% static 'suggestions/video1.mp4' %}" type="video/mp4" data-res="534p">
  </video>
  <div class="modal" tabindex="-1" role="dialog" id="first_modal" style="margin-top: 11vh;">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Hurry Up! Your Video is Waiting :)</h5>
        </div>
        <div class="modal-body">
          <h5 class="card-title">What is the average playtime</h5>
          <div class="btn-group btn-group-toggle" data-toggle="buttons">
            <label class="btn btn-secondary">
              <input type="radio" name="playtime" value="1">1
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="playtime" value="2">2
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="playtime" value="3">3
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="playtime" value="4">4
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="playtime" value="5">5
            </label>
          </div>
          <h5 class="card-title">How difficult are your studies?</h5>
          <div class="btn-group btn-group-toggle" data-toggle="buttons">
            <label class="btn btn-secondary">
              <input type="radio" name="difficult" value="1">1
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="difficult" value="2">2
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="difficult" value="3">3
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="difficult" value="4">4
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="difficult" value="5">5
            </label>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" onclick="closeModal('first_modal')">Next</button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal" tabindex="-1" role="dialog" id="second_modal">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Hurry Up! Your Video is Waiting :)</h5>
        </div>
        <div class="modal-body">
          <h5 class="card-title">How clean is your school environment</h5>
          <div class="btn-group btn-group-toggle" data-toggle="buttons">
            <label class="btn btn-secondary">
              <input type="radio" name="environment" value="1">1
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="environment" value="2">2
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="environment" value="3">3
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="environment" value="4">4
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="environment" value="5">5
            </label>
          </div>
          <h5 class="card-title">Are creative and colourful materials used to teach</h5>
          <div class="btn-group btn-group-toggle" data-toggle="buttons" id="creative_org">
            <label class="btn btn-secondary">
              <input type="radio" name="materials" value="1">1
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="materials" value="2">2
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="materials" value="3">3
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="materials" value="4">4
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="materials" value="5">5
            </label>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" onclick="closeModal('second_modal')">Next</button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal" tabindex="-1" role="dialog" id="third_modal">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Hurry Up! Your Video is Waiting :)</h5>
        </div>
        <div class="modal-body">
          <h5 class="card-title">How much do you participate in extra curricular activities</h5>
          <div class="btn-group btn-group-toggle" data-toggle="buttons">
            <label class="btn btn-secondary">
              <input type="radio" name="extra_curr" value="1">1
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="extra_curr" value="2">2
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="extra_curr" value="3">3
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="extra_curr" value="4">4
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="extra_curr" value="5">5
            </label>
          </div>
          <h5 class="card-title">How afraid are you during exam time</h5>
          <div class="btn-group btn-group-toggle" data-toggle="buttons">
            <label class="btn btn-secondary">
              <input type="radio" name="fear" value="1">1
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="fear" value="2">2
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="fear" value="3">3
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="fear" value="4">4
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="fear" value="5">5
            </label>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" onclick="closeModal('third_modal')">Next</button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal" tabindex="-1" role="dialog" id="fourth_modal">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Hurry Up! Your Video is Waiting :)</h5>
        </div>
        <div class="modal-body">
          <h5 class="card-title">Do you like going to school</h5>
          <div class="btn-group btn-group-toggle" data-toggle="buttons">
            <label class="btn btn-secondary">
              <input type="radio" name="like_sch" value="1">1
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="like_sch" value="2">2
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="like_sch" value="3">3
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="like_sch" value="4">4
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="like_sch" value="5">5
            </label>
          </div>
          <h5 class="card-title">Do you like playing with friends?</h5>
          <div class="btn-group btn-group-toggle" data-toggle="buttons">
            <label class="btn btn-secondary">
              <input type="radio" name="like_friends" value="1">1
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="like_friends" value="2">2
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="like_friends" value="3">3
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="like_friends" value="4">4
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="like_friends" value="5">5
            </label>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" onclick="closeModal('fourth_modal')">Next</button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal" tabindex="-1" role="dialog" id="fifth_modal">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Hurry Up! Your Video is Waiting :)</h5>
        </div>
        <div class="modal-body">
          <div class="card text-center">
            <div class="card-body" style="padding: 0.5rem !important;">
              <h5 class="card-title">Any other factors, according to you which contribute to your happiness</h5>
            </div>
            <div style="margin-bottom:1rem;">
              <input id="others_val" type="text" name="others" placeholder="Enter your suggestions"
                class="form-control">
            </div>
          </div>
          <div class="card text-center">
            <div class="card-body" style="padding: 0.5rem !important;">
              <h5 class="card-title">Do you have any solution for the above mentioned problem(/s)?(Write your solution
                below)</h5>
            </div>
            <div style="margin-bottom:1rem;">
              <input id="soln_val" type="text" name="solution" placeholder="Enter your suggestions"
                class="form-control">
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" onclick="closeModal('fifth_modal')">Next</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" tabindex="-1" role="dialog" id="sixth_modal">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Hurry Up! Your Video is Waiting :)</h5>
        </div>
        <div class="modal-body">
          <div class="card text-center">
            <div class="card-body">
                <h5 class="card-title">Are creative and colourful materials used to teach</h5>
                <div class="btn-group btn-group-toggle" data-toggle="buttons" id="creative_org">
                    <label class="btn btn-secondary">
                        <input type="radio" name="materials2" value="1">1
                    </label>
                    <label class="btn btn-secondary">
                        <input type="radio" name="materials2" value="2">2
                    </label>
                    <label class="btn btn-secondary">
                        <input type="radio" name="materials2" value="3">3
                    </label>
                    <label class="btn btn-secondary">
                        <input type="radio" name="materials2" value="4">4
                    </label>
                    <label class="btn btn-secondary">
                        <input type="radio" name="materials2" value="5">5
                    </label>
                </div>
            </div>
        </div>
            <div class="card text-center">
              <div class="card-body">
                  <h5 class="card-title">How afraid are you during exam time</h5>
                  <div class="btn-group btn-group-toggle" data-toggle="buttons">
                      <label class="btn btn-secondary">
                          <input type="radio" name="fear2" value="1">1
                      </label>
                      <label class="btn btn-secondary">
                          <input type="radio" name="fear2" value="2">2
                      </label>
                      <label class="btn btn-secondary">
                          <input type="radio" name="fear2" value="3">3
                      </label>
                      <label class="btn btn-secondary">
                          <input type="radio" name="fear2" value="4">4
                      </label>
                      <label class="btn btn-secondary">
                          <input type="radio" name="fear2" value="5">5
                      </label>
                  </div>

              </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" onclick="closeModal('sixth_modal')">Finish</button>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock body %}
{% block script %}
<script>
  var pausetime = 45;

  var myPlayer = videojs('video_kgvid_0');
  var modals = ['first_modal', 'second_modal', 'third_modal', 'fourth_modal', 'fifth_modal','sixth_modal'];
  i = 0;
  myPlayer.on('timeupdate', function (e) {
    if (myPlayer.currentTime() >= pausetime) {
      pausetime = 45 + myPlayer.currentTime()
      myPlayer.pause();
      console.log('Paused');
      $('#' + modals[i]).show();
      i++;
      console.log(myPlayer.currentTime())
    }
    else if (myPlayer.ended()) {
      console.log('Hello');
      play_val = $("input[type='radio'][name='playtime']:checked").val();
      env_val = $("input[type='radio'][name='environment']:checked").val();
      difficult_val = $("input[type='radio'][name='difficult']:checked").val();
      mat_val = $("input[type='radio'][name='materials']:checked").val();
      mat2_val = $("input[type='radio'][name='materials2']:checked").val();
      extra_val = $("input[type='radio'][name='extra_curr']:checked").val();
      fear_val = $("input[type='radio'][name='fear']:checked").val();
      fear2_val = $("input[type='radio'][name='fear2']:checked").val();
      like_sch_val = $("input[type='radio'][name='like_sch']:checked").val();
      like_friends_val = $("input[type='radio'][name='like_friends']:checked").val();
      others_val = $("#others_val").val();
      solution_val = $("#soln_val").val();
      $.ajax(
        {
          type: "POST",
          url: "{% url 'savedata' %}",
          data: {
            'playtime': play_val,
            'environment': env_val,
            'difficult': difficult_val,
            'materials': mat_val,
            'materials2': mat2_val,
            'extra_curr': extra_val,
            'fear': fear_val,
            'fear2': fear2_val,
            'like_sch': like_sch_val,
            'like_friends': like_friends_val,
            'others': others_val,
            'solution': solution_val,
            csrfmiddlewaretoken: '{{ csrf_token }}',
          },
          success: function (response) {
            window.location = 'http://127.0.0.1:8000';
          }
        })

    }
  });
  function closeModal(id) {
    $('#' + id).hide();
    myPlayer.play();
  }

</script>

{% endblock script %}